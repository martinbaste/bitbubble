<!DOCTYPE html>
<html>
<head>
	<title></title>
</head>
<body>
<div>
	<header>
		<h1>Bitcoin Bubble Simulator</h1>
	</header>

	<div>
		<label><strong>What is the probability of a bitcoin bubble crash?</strong></label><br/>
		<input type="range" min="0" max="100" value="80" id="prob" list="tickmarks"/>
		<span id="probDisplay"></span>%
	</div>
	<div>
		<label><strong>Price growth if there is no crash</strong></label><br/>
		<select id="growth">
			<option value="100">100% - No change</option>
			<option value="105">105%</option>
			<option value="110">110%</option>
			<option value="120">120%</option>
			<option value="150">150%</option>
			<option value="200" selected>200%</option>
			<option value="500">500%</option>
			<option value="800">800%</option>
			<option value="1000">1,000%</option>
			<option value="2500">2,500%</option>
			<option value="5000">5,000%</option>
			<option value="10000">10,000%</option>
		</select>
	</div>
	<div>
		<label><strong>Price after crash</strong></label><br/>
		<input type="range" min="0" max="100" value="30" id="crash" list="tickmarks"/>
		<span id="crashDisplay"></span>%
	</div>
	<!-- <div>
		<label>Investment distribution</label><br/>
		<input type="range" min="0" max="100" value="50" id="split" list="tickmarks"/>
		<span id="splitDisplay"></span>%
	</div> -->
	<div>
		Expected profit if there is no crash: $<span id="earn"></span><br/>
		Expected loss if bitcoin crashes: $<span id="loss"></span><br/>
		Expected value: $<span id="ev"></span>  ($<span id="change"></span> <span id="profit-loss"></span>)
	</div>
</div>

<datalist id="tickmarks">
  <option value="0" label="0%">
  <option value="10">
  <option value="20">
  <option value="30">
  <option value="40">
  <option value="50" label="50%">
  <option value="60">
  <option value="70">
  <option value="80">
  <option value="90">
  <option value="100" label="100%">
</datalist>


<script
  src="https://code.jquery.com/jquery-3.2.1.min.js"
  integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
  crossorigin="anonymous"></script>
<script>

	function setDisplay() {
		$("#probDisplay").text($("#prob").val());
		$("#growthDisplay").text($("#growth").val());
		$("#crashDisplay").text($("#crash").val());
		$("#splitDisplay").text($("#split").val());
	}

	function calculateEV() {
		var inv = 10000; //investment
		//($("#split").val()/100)
		var probCrash = $("#prob").val()/100;
		var earn = (($("#growth").val()/100) * inv);
		var loss = (($("#crash").val()/100) * inv);
		var expected = (earn * (1 - probCrash)) + (loss * probCrash);

		var change = expected - inv;

		$("#earn").text(earn.toLocaleString('en', {useGrouping:true}));
		$("#loss").text(loss.toLocaleString('en', {useGrouping:true}));
		$("#ev").text(expected.toLocaleString('en', {useGrouping:true}));
		
		if (change >= 0) {
			$("#profit-loss").text("profit");
		} else {
			change = -change;
			$("#profit-loss").text("loss");
		}
		$("#change").text(change.toLocaleString('en', {useGrouping:true}));
	}

	$("input").change(function() {setDisplay();calculateEV();});
	$("select").change(function() {setDisplay();calculateEV();});
	calculateEV();
	setDisplay();

</script>
</body>
</html>